# 预排期页面重构 - 测试检查清单

## 📋 测试环境

- **测试日期**: 2025-10-20
- **开发服务器**: `npm run dev` (http://localhost:3000)
- **测试页面**: `/scheduled`
- **测试人员**: 待填写

---

## ✅ 已完成的集成工作

### 1. 组件集成
- ✅ ScheduledMainTable 已集成到 page.tsx
- ✅ ReviewDialog 接口已更新（支持通过/不通过）
- ✅ ScheduledBatchActions 已集成
- ✅ 所有通用DataTable组件已集成
- ✅ 无linter错误

### 2. 接口适配
- ✅ ReviewDialog 现在接收 onSubmitReview(status)
- ✅ ReviewDialog 使用受控组件模式 (opinion + onOpinionChange)
- ✅ ScheduledMainTable 接收所有必要的props
- ✅ hooks返回的数据结构与组件需求匹配

---

## 🧪 功能测试清单

### 基础功能（100%）

#### 页面加载 ✅
- [ ] 页面正常加载，无报错
- [ ] 骨架屏正常显示（加载时）
- [ ] 数据加载后正常显示

#### 搜索功能 ✅
- [ ] 搜索框可以输入文本
- [ ] 输入搜索关键词后，表格实时筛选
- [ ] 搜索标题、ID、创建人等字段
- [ ] 清空搜索后恢复所有数据

#### 高级筛选 ✅
- [ ] 点击"筛选设置"按钮，下拉菜单正常显示
- [ ] 点击"添加条件"，新增筛选条件
- [ ] 选择列、操作符、输入值后，筛选生效
- [ ] 删除筛选条件正常工作
- [ ] "清空所有"按钮清除所有筛选条件
- [ ] 有效筛选条件数量显示正确

#### 列控制 ✅
- [ ] 点击"列控制"按钮，下拉菜单正常显示
- [ ] 复选框切换列显示/隐藏
- [ ] 拖拽图标可以拖动调整列顺序
- [ ] 隐藏的列在表格中不显示
- [ ] 列顺序调整后表格立即更新
- [ ] "恢复默认"按钮重置列设置
- [ ] 列设置保存到localStorage
- [ ] 刷新页面后列设置保持

---

### 表格功能（待测试）

#### 版本分组 ⏳
- [ ] 需求按版本正确分组
- [ ] 未分配版本的需求显示在"未分配版本"分组
- [ ] 每个版本分组显示需求数量
- [ ] 点击版本标题可以展开/折叠
- [ ] 展开状态保存到localStorage

#### 行选择 ⏳
- [ ] 点击行首复选框选择单个需求
- [ ] 点击版本分组的复选框全选该版本
- [ ] 选择后批量操作栏显示
- [ ] 选择数量显示正确
- [ ] "取消选择"按钮清除所有选择

#### 排序功能 ⏳
- [ ] 点击列标题触发排序
- [ ] 第一次点击升序，第二次点击降序
- [ ] 排序图标正确显示
- [ ] 优先级、日期等字段排序逻辑正确
- [ ] 排序状态保存

#### 单元格编辑 ⏳
- [ ] 版本下拉菜单可以选择
- [ ] 是否运营下拉菜单可以选择
- [ ] 评审状态显示正确（待评审、一级通过、二级通过等）
- [ ] 延期标签正确显示
- [ ] 单元格编辑后立即更新

---

### 批量操作（待测试）

#### 批量分配版本 ⏳
- [ ] 选择需求后，"批量分配版本"按钮可点击
- [ ] 下拉菜单显示所有可用版本
- [ ] 点击版本后显示进度条
- [ ] 批量操作成功后显示成功提示
- [ ] 批量操作后数据更新
- [ ] 批量操作失败有错误提示

#### 批量评审 ⏳
- [ ] "批量评审"按钮显示4个选项（一级通过/不通过，二级通过/不通过）
- [ ] 点击选项后显示进度条
- [ ] 批量评审成功后显示成功提示
- [ ] 评审状态更新正确
- [ ] 批量评审失败有错误提示

#### 批量是否运营 ⏳
- [ ] "批量是否运营"按钮显示2个选项（是、否）
- [ ] 点击选项后显示进度条
- [ ] 批量操作成功后显示成功提示
- [ ] 运营状态更新正确

---

### 评审对话框（待测试）

#### 打开对话框 ⏳
- [ ] 点击表格中的"填写意见"按钮
- [ ] 评审对话框正常打开
- [ ] 对话框标题显示正确（一级/二级评审 + 需求标题）
- [ ] 如果已有评审意见，预填到输入框

#### 填写意见 ⏳
- [ ] 输入框可以输入文本
- [ ] 字符计数正确显示
- [ ] 最多输入1000字符
- [ ] 超过限制无法继续输入

#### 提交评审 ⏳
- [ ] "取消"按钮关闭对话框
- [ ] "不通过"按钮提交不通过状态
- [ ] "通过"按钮提交通过状态
- [ ] 提交时按钮显示"提交中..."
- [ ] 提交成功后关闭对话框
- [ ] 提交成功后显示成功提示
- [ ] 表格中的评审状态立即更新
- [ ] 评审失败有错误提示

---

## 🚀 性能测试（待测试）

### 渲染性能 ⏳
- [ ] 100条数据加载时间 < 1秒
- [ ] 滚动表格流畅，无卡顿
- [ ] 搜索响应时间 < 100ms
- [ ] 筛选响应时间 < 200ms
- [ ] 列显示/隐藏切换流畅

### 内存使用 ⏳
- [ ] 长时间使用无内存泄漏
- [ ] 频繁操作无性能下降

---

## 🐛 已知问题

### 待修复
无

### 待优化
- [ ] 考虑为大数据量（>500条）添加虚拟滚动
- [ ] 考虑为表格添加虚拟列（横向滚动优化）

---

## 📝 测试结果记录

### 测试环境信息
```
浏览器: _________
操作系统: _________
Node版本: _________
屏幕分辨率: _________
```

### 发现的问题
1. ___________________________
2. ___________________________
3. ___________________________

### 测试结论
- [ ] 所有功能正常，可以上线
- [ ] 有轻微问题，可以接受
- [ ] 有严重问题，需要修复

---

## 🎯 后续步骤

### 如果测试通过
1. 提交代码到Git
2. 创建Pull Request
3. 代码审查
4. 合并到主分支
5. 应用通用组件到其他页面（需求池、看板等）

### 如果发现问题
1. 记录问题详情到上方"发现的问题"部分
2. 修复问题
3. 重新测试
4. 确认修复后再提交

---

## 📚 相关文档

- [重构完成总结](./REFACTOR_COMPLETE_SUMMARY.md)
- [下一步指南](./NEXT_STEPS.md)
- [进度报告](./REFACTOR_PROGRESS.md)
- [V2方案设计](./SCHEDULED_REFACTOR_V2_WITH_SHARED.md)

---

**测试愉快！** 🚀

如有任何问题，请参考文档或查看原始备份文件 `src/app/scheduled/page.tsx.backup`。

