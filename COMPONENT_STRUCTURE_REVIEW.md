# ç»„ä»¶å’Œç»“æ„æ£€æŸ¥æŠ¥å‘Š

ç”Ÿæˆæ—¶é—´: 2024-09-30
æ£€æŸ¥èŒƒå›´: éœ€æ±‚æ± ã€éœ€æ±‚æ–°å»ºã€éœ€æ±‚ç¼–è¾‘ã€éœ€æ±‚è¯¦æƒ…é¡µ

---

## ğŸ“Š ä»£ç è§„æ¨¡ç»Ÿè®¡

| é¡µé¢ | ä»£ç è¡Œæ•° | å¤æ‚åº¦è¯„çº§ | çŠ¶æ€ |
|------|---------|-----------|------|
| éœ€æ±‚ç¼–è¾‘é¡µ | 1,334 è¡Œ | ğŸ”´ æé«˜ | æ€¥éœ€é‡æ„ |
| éœ€æ±‚è¯¦æƒ…é¡µ | 944 è¡Œ | ğŸ”´ å¾ˆé«˜ | æ€¥éœ€é‡æ„ |
| éœ€æ±‚æ–°å»ºé¡µ | 832 è¡Œ | ğŸŸ¡ é«˜ | å»ºè®®é‡æ„ |
| éœ€æ±‚æ± é¡µ | 169 è¡Œ | ğŸŸ¢ è‰¯å¥½ | ç»“æ„åˆç† |

**é—®é¢˜**: ä¸‰ä¸ªé¡µé¢éƒ½è¶…è¿‡äº†æ¨èçš„ 300-400 è¡Œé˜ˆå€¼

---

## ğŸ” è¯¦ç»†åˆ†æ

### 1. éœ€æ±‚æ± é¡µé¢ (page.tsx) - âœ… ç»“æ„ä¼˜ç§€

#### ä¼˜ç‚¹
1. âœ… **ç»„ä»¶è®¾è®¡åˆç†**
   - é¡µé¢æœ¬èº«åªæ˜¯ä¸€ä¸ªå®¹å™¨ç»„ä»¶
   - ä¸šåŠ¡é€»è¾‘æ‹†åˆ†ä¸ºç‹¬ç«‹ç»„ä»¶å’Œ hooks
   
2. âœ… **èŒè´£æ¸…æ™°**
   ```
   RequirementsPage (169 è¡Œ)
   â”œâ”€â”€ FilterPanel (ç­›é€‰é¢æ¿ç»„ä»¶)
   â”œâ”€â”€ BatchOperations (æ‰¹é‡æ“ä½œç»„ä»¶)
   â”œâ”€â”€ RequirementTable (è¡¨æ ¼ç»„ä»¶)
   â””â”€â”€ useRequirementFilters (è‡ªå®šä¹‰ hook)
   ```

3. âœ… **ç¬¦åˆæœ€ä½³å®è·µ**
   - ä½¿ç”¨è‡ªå®šä¹‰ hooks (`useRequirementFilters`)
   - çŠ¶æ€ç®¡ç†åˆ†ç¦» (Zustand store)
   - UI ç»„ä»¶ç‹¬ç«‹
   - ä¸šåŠ¡é€»è¾‘é›†ä¸­

4. âœ… **æ¨¡å—åŒ–ç¨‹åº¦é«˜**
   - æ¯ä¸ªå­ç»„ä»¶èŒè´£å•ä¸€
   - props ä¼ é€’æ¸…æ™°
   - æ˜“äºæµ‹è¯•å’Œç»´æŠ¤

#### å»ºè®®
æ— éœ€é‡æ„ï¼Œä¿æŒç°æœ‰ç»“æ„ âœ…

---

### 2. éœ€æ±‚æ–°å»ºé¡µ (new/page.tsx) - âš ï¸ éœ€è¦ä¼˜åŒ–

#### é—®é¢˜åˆ†æ

**ä»£ç è¡Œæ•°**: 832 è¡Œ

**ç»„ä»¶èŒè´£è¿‡å¤š**:
```typescript
CreateRequirementPage {
  - è¡¨å•çŠ¶æ€ç®¡ç† (120+ è¡Œ)
  - æ–‡ä»¶ä¸Šä¼ é€»è¾‘ (30+ è¡Œ)
  - æ ‡ç­¾ç®¡ç† (20+ è¡Œ)
  - è¯„å®¡çº§åˆ«ç®¡ç† (100+ è¡Œ)
  - ç«¯è´Ÿè´£äººæ„è§ç®¡ç† (30+ è¡Œ)
  - è¡¨å•éªŒè¯å’Œæäº¤ (50+ è¡Œ)
  - UI æ¸²æŸ“ (450+ è¡Œ)
  - å¿«æ·æ“ä½œé€»è¾‘ (30+ è¡Œ)
}
```

#### ğŸš¨ å­˜åœ¨çš„é—®é¢˜

1. **å•ä¸€ç»„ä»¶æ‰¿æ‹…å¤ªå¤šèŒè´£**
   - è¿åå•ä¸€èŒè´£åŸåˆ™ (SRP)
   - éš¾ä»¥æµ‹è¯•å’Œç»´æŠ¤
   - ä»£ç é‡å¤ï¼ˆä¸ç¼–è¾‘é¡µé«˜åº¦ç›¸ä¼¼ï¼‰

2. **é‡å¤çš„ UI ä»£ç å—**
   ```typescript
   // è¿™äº›ä»£ç å—é‡å¤å‡ºç°
   - åŸºæœ¬ä¿¡æ¯å¡ç‰‡ (~60 è¡Œ)
   - ç«¯è´Ÿè´£äººæ„è§å¡ç‰‡ (~120 è¡Œ)
   - é¢„æ’æœŸè¯„å®¡å¡ç‰‡ (~150 è¡Œ)
   - å¿«æ·æ“ä½œå¡ç‰‡ (~120 è¡Œ)
   - é™„ä»¶ä¸Šä¼ åŒºåŸŸ (~60 è¡Œ)
   ```

3. **ä¸šåŠ¡é€»è¾‘æ··æ‚åœ¨ UI ä¸­**
   - è¡¨å•å¤„ç†é€»è¾‘æ•£è½å„å¤„
   - ç¼ºå°‘ç»Ÿä¸€çš„è¡¨å•ç®¡ç†

4. **ç¼ºå°‘å¯å¤ç”¨çš„æŠ½è±¡**
   - è¯„å®¡çº§åˆ«ç®¡ç†é€»è¾‘åº”è¯¥ç‹¬ç«‹
   - æ–‡ä»¶ä¸Šä¼ åº”è¯¥æ˜¯ç‹¬ç«‹ç»„ä»¶

#### ğŸ’¡ å»ºè®®çš„é‡æ„æ–¹æ¡ˆ

```typescript
// å»ºè®®ç»“æ„
CreateRequirementPage (å®¹å™¨ç»„ä»¶, ~100 è¡Œ)
â”œâ”€â”€ RequirementForm (è¡¨å•å®¹å™¨, ~80 è¡Œ)
â”‚   â”œâ”€â”€ BasicInfoSection (åŸºæœ¬ä¿¡æ¯, ~60 è¡Œ)
â”‚   â”œâ”€â”€ DescriptionSection (éœ€æ±‚æè¿°, ~40 è¡Œ)
â”‚   â””â”€â”€ AttachmentsSection (é™„ä»¶ä¸Šä¼ , ~50 è¡Œ)
â”œâ”€â”€ EndOwnerOpinionCard (ç«¯è´Ÿè´£äººæ„è§, ~100 è¡Œ)
â”œâ”€â”€ ScheduledReviewCard (é¢„æ’æœŸè¯„å®¡, ~120 è¡Œ)
â”œâ”€â”€ QuickActionsCard (å¿«æ·æ“ä½œ, ~80 è¡Œ)
â””â”€â”€ useRequirementForm (è‡ªå®šä¹‰ hook, ~150 è¡Œ)
    â”œâ”€â”€ è¡¨å•çŠ¶æ€ç®¡ç†
    â”œâ”€â”€ éªŒè¯é€»è¾‘
    â””â”€â”€ æäº¤å¤„ç†
```

**ç»„ä»¶æ‹†åˆ†ä¼˜å…ˆçº§**:
1. ğŸ”´ **é«˜**: `ScheduledReviewCard` (é¢„æ’æœŸè¯„å®¡)
2. ğŸ”´ **é«˜**: `EndOwnerOpinionCard` (ç«¯è´Ÿè´£äººæ„è§)
3. ğŸŸ¡ **ä¸­**: `AttachmentsSection` (é™„ä»¶ä¸Šä¼ )
4. ğŸŸ¡ **ä¸­**: `useRequirementForm` (è¡¨å• hook)
5. ğŸŸ¢ **ä½**: `QuickActionsCard` (å¿«æ·æ“ä½œ)

---

### 3. éœ€æ±‚è¯¦æƒ…é¡µ ([id]/page.tsx) - ğŸ”´ æ€¥éœ€é‡æ„

#### é—®é¢˜åˆ†æ

**ä»£ç è¡Œæ•°**: 944 è¡Œ

**ç»„ä»¶æ‰¿æ‹…è¿‡å¤šèŒè´£**:
```typescript
RequirementDetailPage {
  - éœ€æ±‚æ•°æ®åŠ è½½ (30+ è¡Œ)
  - çŠ¶æ€åˆ‡æ¢é€»è¾‘ (30+ è¡Œ)
  - è¯„è®ºç³»ç»Ÿ (200+ è¡Œ)
    â”œâ”€â”€ è¯„è®ºåˆ—è¡¨
    â”œâ”€â”€ å›å¤åŠŸèƒ½
    â”œâ”€â”€ é™„ä»¶ä¸Šä¼ 
    â””â”€â”€ è¡¨å•å¤„ç†
  - ä¿®æ”¹è®°å½• (50+ è¡Œ)
  - åŸºæœ¬ä¿¡æ¯å±•ç¤º (50+ è¡Œ)
  - ç«¯è´Ÿè´£äººæ„è§ (150+ è¡Œ)
  - é¢„æ’æœŸè¯„å®¡ (180+ è¡Œ)
  - å¿«æ·æ“ä½œ (100+ è¡Œ)
  - UI æ¸²æŸ“ (150+ è¡Œ)
}
```

#### ğŸš¨ ä¸¥é‡é—®é¢˜

1. **è¯„è®ºç³»ç»Ÿå®Œå…¨å†…åµŒ**
   - 200+ è¡Œè¯„è®ºç›¸å…³ä»£ç 
   - åŒ…å«çŠ¶æ€ã€å¤„ç†å‡½æ•°ã€UI
   - ä¸ç¼–è¾‘é¡µé‡å¤

2. **ç¼ºå°‘é€»è¾‘åˆ†ç¦»**
   ```typescript
   // æ‰€æœ‰é€»è¾‘æ··åœ¨ä¸€ä¸ªç»„ä»¶ä¸­
   handleSubmitComment()      // è¯„è®ºæäº¤
   handleSubmitReply()        // å›å¤æäº¤
   handleFileUpload()         // æ–‡ä»¶ä¸Šä¼ 
   handleToggleStatus()       // çŠ¶æ€åˆ‡æ¢
   handleNavigateToPRD()      // å¿«æ·æ“ä½œ
   // ... è¿˜æœ‰ 10+ ä¸ªå…¶ä»–å‡½æ•°
   ```

3. **æ•°æ®å’Œ UI å¼ºè€¦åˆ**
   - æ‰€æœ‰æ•°æ®å¤„ç†åœ¨ç»„ä»¶å†…éƒ¨
   - æ— æ³•ç‹¬ç«‹æµ‹è¯•ä¸šåŠ¡é€»è¾‘

4. **ç»„ä»¶åµŒå¥—æ·±**
   - å¤šå±‚ Card åµŒå¥—
   - æ¡ä»¶æ¸²æŸ“å¤æ‚
   - éš¾ä»¥é˜…è¯»å’Œç»´æŠ¤

#### ğŸ’¡ å»ºè®®çš„é‡æ„æ–¹æ¡ˆ

```typescript
// ç†æƒ³ç»“æ„
RequirementDetailPage (å®¹å™¨ç»„ä»¶, ~150 è¡Œ)
â”œâ”€â”€ RequirementHeader (å¤´éƒ¨ä¿¡æ¯, ~80 è¡Œ)
â”‚   â”œâ”€â”€ æ ‡é¢˜å’ŒçŠ¶æ€
â”‚   â”œâ”€â”€ æ“ä½œæŒ‰é’®
â”‚   â””â”€â”€ æ—¶é—´ä¿¡æ¯
â”œâ”€â”€ RequirementContent (ä¸»å†…å®¹, ~100 è¡Œ)
â”‚   â”œâ”€â”€ DescriptionCard (éœ€æ±‚æè¿°)
â”‚   â””â”€â”€ AttachmentsCard (é™„ä»¶åˆ—è¡¨)
â”œâ”€â”€ CommentSection (è¯„è®ºåŒº, ~150 è¡Œ)
â”‚   â”œâ”€â”€ CommentList
â”‚   â”œâ”€â”€ CommentForm
â”‚   â””â”€â”€ useComments (hook)
â”œâ”€â”€ HistorySection (ä¿®æ”¹è®°å½•, ~60 è¡Œ)
â”œâ”€â”€ RequirementSidebar (ä¾§è¾¹æ , ~150 è¡Œ)
â”‚   â”œâ”€â”€ BasicInfoCard (åŸºæœ¬ä¿¡æ¯, ~60 è¡Œ)
â”‚   â”œâ”€â”€ EndOwnerOpinionCard (ç«¯è´Ÿè´£äººæ„è§, ~100 è¡Œ)
â”‚   â”œâ”€â”€ ScheduledReviewCard (é¢„æ’æœŸè¯„å®¡, ~120 è¡Œ)
â”‚   â””â”€â”€ QuickActionsCard (å¿«æ·æ“ä½œ, ~80 è¡Œ)
â””â”€â”€ useRequirementDetail (hook, ~100 è¡Œ)
```

**è‡ªå®šä¹‰ Hooks å»ºè®®**:
```typescript
// hooks/useComments.ts (~150 è¡Œ)
export function useComments() {
  // è¯„è®ºçŠ¶æ€ç®¡ç†
  // è¯„è®ºæäº¤é€»è¾‘
  // å›å¤é€»è¾‘
  // æ–‡ä»¶ä¸Šä¼ 
  return { comments, handleSubmit, handleReply, ... };
}

// hooks/useRequirementDetail.ts (~100 è¡Œ)
export function useRequirementDetail(id: string) {
  // æ•°æ®åŠ è½½
  // çŠ¶æ€åˆ‡æ¢
  // æ•°æ®æ›´æ–°
  return { requirement, updateStatus, ... };
}
```

**ç»„ä»¶æ‹†åˆ†ä¼˜å…ˆçº§**:
1. ğŸ”´ **ç´§æ€¥**: `CommentSection` + `useComments` hook
2. ğŸ”´ **ç´§æ€¥**: `ScheduledReviewCard` (ä¸æ–°å»ºé¡µå…±äº«)
3. ğŸ”´ **ç´§æ€¥**: `EndOwnerOpinionCard` (ä¸æ–°å»ºé¡µå…±äº«)
4. ğŸŸ¡ **é«˜**: `RequirementSidebar` (ä¾§è¾¹æ å®¹å™¨)
5. ğŸŸ¡ **é«˜**: `RequirementHeader` (å¤´éƒ¨)
6. ğŸŸ¢ **ä¸­**: `QuickActionsCard` (å¿«æ·æ“ä½œ)

---

### 4. éœ€æ±‚ç¼–è¾‘é¡µ ([id]/edit/page.tsx) - ğŸ”´ æ€¥éœ€é‡æ„

#### é—®é¢˜åˆ†æ

**ä»£ç è¡Œæ•°**: 1,334 è¡Œ (æœ€å¤§çš„æ–‡ä»¶ï¼)

**é—®é¢˜æœ€ä¸¥é‡**:
```typescript
RequirementEditPage {
  - è¡¨å•æ•°æ®åŠ è½½ (50+ è¡Œ)
  - å¤æ‚çš„è¡¨å•çŠ¶æ€ (150+ è¡Œ)
  - è¡¨å•è¾“å…¥å¤„ç† (200+ è¡Œ)
  - è¯„å®¡çº§åˆ«ç®¡ç† (150+ è¡Œ)
  - ç«¯è´Ÿè´£äººç®¡ç† (100+ è¡Œ)
  - æ–‡ä»¶ä¸Šä¼  (50+ è¡Œ)
  - è¯„è®ºç³»ç»Ÿ (å®Œæ•´çš„ 250+ è¡Œ)
  - ä¿®æ”¹è®°å½• (80+ è¡Œ)
  - è¡¨å•éªŒè¯å’Œæäº¤ (50+ è¡Œ)
  - UI æ¸²æŸ“ (420+ è¡Œ)
}
```

#### ğŸš¨ ä¸¥é‡é—®é¢˜

1. **ä»£ç é‡å¤ä¸¥é‡**
   - ä¸æ–°å»ºé¡µé‡å¤ 60%+
   - ä¸è¯¦æƒ…é¡µé‡å¤ 40%+
   - è¯„è®ºç³»ç»Ÿå®Œå…¨é‡å¤

2. **å•ä¸€ç»„ä»¶è¶…è¿‡ 1300 è¡Œ**
   - æéš¾ç»´æŠ¤
   - éš¾ä»¥ç†è§£
   - æ€§èƒ½éšæ‚£

3. **ç¼ºå°‘æŠ½è±¡å±‚**
   - æ‰€æœ‰é€»è¾‘å¹³é“º
   - æ²¡æœ‰å¤ç”¨æœºåˆ¶

4. **åˆå§‹æ•°æ®æ··ä¹±**
   ```typescript
   // ç¡¬ç¼–ç çš„ mock æ•°æ® (~60 è¡Œ)
   const mockExistingRequirement: RequirementFormData = {...}
   
   // åˆä» store åŠ è½½æ•°æ® (~40 è¡Œ)
   useEffect(() => {
     const requirement = getRequirementById(id);
     setFormData({...});
   }, []);
   ```

#### ğŸ’¡ å»ºè®®çš„é‡æ„æ–¹æ¡ˆ

```typescript
// ç†æƒ³ç»“æ„ (ä¸æ–°å»ºé¡µå…±äº«ç»„ä»¶)
RequirementEditPage (å®¹å™¨ç»„ä»¶, ~120 è¡Œ)
â”œâ”€â”€ RequirementFormHeader (å¤´éƒ¨, ~60 è¡Œ)
â”œâ”€â”€ RequirementFormLayout (è¡¨å•å¸ƒå±€, ~100 è¡Œ)
â”‚   â”œâ”€â”€ RequirementForm (å·¦ä¾§è¡¨å•, ~100 è¡Œ)
â”‚   â”‚   â”œâ”€â”€ DescriptionSection
â”‚   â”‚   â””â”€â”€ AttachmentsSection
â”‚   â””â”€â”€ RequirementFormSidebar (å³ä¾§ä¾§è¾¹æ , ~100 è¡Œ)
â”‚       â”œâ”€â”€ BasicInfoSection
â”‚       â”œâ”€â”€ EndOwnerOpinionCard
â”‚       â”œâ”€â”€ ScheduledReviewCard
â”‚       â””â”€â”€ QuickActionsCard
â”œâ”€â”€ CommentSection (è¯„è®ºåŒº - å…±äº«ç»„ä»¶)
â”œâ”€â”€ HistorySection (ä¿®æ”¹è®°å½•)
â””â”€â”€ useRequirementForm (hook - å…±äº«)
```

**ç»„ä»¶æ‹†åˆ†ä¼˜å…ˆçº§**:
1. ğŸ”´ **ç´§æ€¥**: æŠ½å–è¯„è®ºç³»ç»Ÿä¸ºå…±äº«ç»„ä»¶
2. ğŸ”´ **ç´§æ€¥**: åˆ›å»º `useRequirementForm` hookï¼ˆæ–°å»ºå’Œç¼–è¾‘å…±äº«ï¼‰
3. ğŸ”´ **ç´§æ€¥**: å…±äº« `ScheduledReviewCard` å’Œ `EndOwnerOpinionCard`
4. ğŸŸ¡ **é«˜**: åˆ›å»º `RequirementFormLayout` å¸ƒå±€ç»„ä»¶
5. ğŸŸ¡ **é«˜**: æ¸…ç† mock æ•°æ®ï¼Œç»Ÿä¸€æ•°æ®åŠ è½½

---

## ğŸ“‹ ä»£ç é‡å¤åˆ†æ

### é‡å¤ä»£ç ç»Ÿè®¡

| ä»£ç å— | æ–°å»ºé¡µ | è¯¦æƒ…é¡µ | ç¼–è¾‘é¡µ | é‡å¤åº¦ |
|--------|--------|--------|--------|--------|
| è¯„è®ºç³»ç»Ÿ | âŒ | âœ… (~250è¡Œ) | âœ… (~250è¡Œ) | 100% |
| é¢„æ’æœŸè¯„å®¡ | âœ… (~150è¡Œ) | âœ… (~180è¡Œ) | âœ… (~150è¡Œ) | 90% |
| ç«¯è´Ÿè´£äººæ„è§ | âœ… (~120è¡Œ) | âœ… (~150è¡Œ) | âœ… (~120è¡Œ) | 85% |
| å¿«æ·æ“ä½œ | âœ… (~120è¡Œ) | âœ… (~100è¡Œ) | âœ… (~120è¡Œ) | 95% |
| é™„ä»¶ä¸Šä¼  | âœ… (~60è¡Œ) | âŒ | âœ… (~60è¡Œ) | 100% |
| åŸºæœ¬ä¿¡æ¯è¡¨å• | âœ… (~60è¡Œ) | âŒ | âœ… (~60è¡Œ) | 95% |

**æ€»é‡å¤ä»£ç **: çº¦ 1,000+ è¡Œ (å¯å‡å°‘ 60-70%)

---

## ğŸ¯ é‡æ„ä¼˜å…ˆçº§æ€»è§ˆ

### ğŸ”´ ç´§æ€¥ (æœ¬å‘¨å®Œæˆ)

#### 1. æŠ½å–å…±äº«ç»„ä»¶

**A. è¯„è®ºç³»ç»Ÿç»„ä»¶** (ä¼˜å…ˆçº§ï¼šæœ€é«˜)
```typescript
// components/requirements/CommentSection.tsx (~200 è¡Œ)
export function CommentSection({ requirementId }: Props) {
  const { comments, addComment, addReply } = useComments(requirementId);
  return <>{/* è¯„è®ºUI */}</>;
}

// hooks/useComments.ts (~150 è¡Œ)
export function useComments(requirementId: string) {
  // è¯„è®ºé€»è¾‘
  return { comments, addComment, addReply, uploadFile };
}
```

**é¢„æœŸæ”¶ç›Š**:
- å‡å°‘ 500+ è¡Œé‡å¤ä»£ç 
- ç»Ÿä¸€è¯„è®ºåŠŸèƒ½
- æ˜“äºç»´æŠ¤å’Œæµ‹è¯•

---

**B. é¢„æ’æœŸè¯„å®¡ç»„ä»¶** (ä¼˜å…ˆçº§ï¼šæœ€é«˜)
```typescript
// components/requirements/ScheduledReviewCard.tsx (~180 è¡Œ)
export function ScheduledReviewCard({ 
  reviewLevels, 
  onUpdate,
  editable = false 
}: Props) {
  return <Card>{/* é¢„æ’æœŸè¯„å®¡ UI */}</Card>;
}

// hooks/useScheduledReview.ts (~100 è¡Œ)
export function useScheduledReview() {
  // è¯„å®¡çº§åˆ«ç®¡ç†é€»è¾‘
  return { addLevel, removeLevel, updateLevel };
}
```

**é¢„æœŸæ”¶ç›Š**:
- å‡å°‘ 450+ è¡Œé‡å¤ä»£ç 
- ä¸‰ä¸ªé¡µé¢å…±äº«åŒä¸€ç»„ä»¶
- ç»Ÿä¸€è¯„å®¡æµç¨‹

---

**C. ç«¯è´Ÿè´£äººæ„è§ç»„ä»¶** (ä¼˜å…ˆçº§ï¼šæœ€é«˜)
```typescript
// components/requirements/EndOwnerOpinionCard.tsx (~150 è¡Œ)
export function EndOwnerOpinionCard({ 
  opinion, 
  onChange,
  editable = false 
}: Props) {
  return <Card>{/* ç«¯è´Ÿè´£äººæ„è§ UI */}</Card>;
}
```

**é¢„æœŸæ”¶ç›Š**:
- å‡å°‘ 390+ è¡Œé‡å¤ä»£ç 
- ç»Ÿä¸€ç«¯è´Ÿè´£äººæ„è§ç®¡ç†

---

#### 2. åˆ›å»ºå…±äº« Hooks

**A. useRequirementForm** (ç»Ÿä¸€è¡¨å•ç®¡ç†)
```typescript
// hooks/useRequirementForm.ts (~200 è¡Œ)
export function useRequirementForm(initialData?: Requirement) {
  // è¡¨å•çŠ¶æ€
  // éªŒè¯é€»è¾‘
  // æäº¤å¤„ç†
  // æ–‡ä»¶ä¸Šä¼ 
  return {
    formData,
    errors,
    handleChange,
    handleSubmit,
    uploadFile,
    ...
  };
}
```

**ä½¿ç”¨åœºæ™¯**:
- æ–°å»ºé¡µ
- ç¼–è¾‘é¡µ
- (æœªæ¥) å¿«é€Ÿç¼–è¾‘å¯¹è¯æ¡†

**é¢„æœŸæ”¶ç›Š**:
- å‡å°‘ 300+ è¡Œä»£ç 
- ç»Ÿä¸€è¡¨å•é€»è¾‘
- æ˜“äºæ·»åŠ å…¨å±€éªŒè¯

---

### ğŸŸ¡ é«˜ä¼˜å…ˆçº§ (ä¸‹å‘¨å®Œæˆ)

#### 3. é™„ä»¶ä¸Šä¼ ç»„ä»¶
```typescript
// components/requirements/AttachmentsSection.tsx (~80 è¡Œ)
export function AttachmentsSection({ 
  attachments, 
  onUpload, 
  onRemove,
  editable = true 
}: Props) {
  return <Card>{/* é™„ä»¶ä¸Šä¼  UI */}</Card>;
}
```

---

#### 4. å¿«æ·æ“ä½œç»„ä»¶
```typescript
// components/requirements/QuickActionsCard.tsx (~120 è¡Œ)
export function QuickActionsCard({ 
  requirementId,
  title 
}: Props) {
  return <Card>{/* å¿«æ·æ“ä½œ UI */}</Card>;
}
```

---

#### 5. ä¿®æ”¹è®°å½•ç»„ä»¶
```typescript
// components/requirements/HistorySection.tsx (~80 è¡Œ)
export function HistorySection({ 
  records 
}: Props) {
  return <Card>{/* ä¿®æ”¹è®°å½• UI */}</Card>;
}
```

---

### ğŸŸ¢ ä¸­ä¼˜å…ˆçº§ (2å‘¨å†…å®Œæˆ)

#### 6. å¸ƒå±€ç»„ä»¶
```typescript
// components/requirements/RequirementFormLayout.tsx
export function RequirementFormLayout({ 
  mainContent, 
  sidebar 
}: Props) {
  return (
    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <div className="lg:col-span-2">{mainContent}</div>
      <div>{sidebar}</div>
    </div>
  );
}
```

---

#### 7. åŸºæœ¬ä¿¡æ¯è¡¨å•
```typescript
// components/requirements/BasicInfoSection.tsx
export function BasicInfoSection({ 
  formData, 
  onChange 
}: Props) {
  return <Card>{/* åŸºæœ¬ä¿¡æ¯è¡¨å• */}</Card>;
}
```

---

## ğŸ“ æ¨èçš„æ–‡ä»¶ç»“æ„

```
src/
â”œâ”€â”€ app/
â”‚   â””â”€â”€ requirements/
â”‚       â”œâ”€â”€ page.tsx (~150 è¡Œ) âœ… ä¿æŒä¸å˜
â”‚       â”œâ”€â”€ new/
â”‚       â”‚   â””â”€â”€ page.tsx (~120 è¡Œ) â¬‡ï¸ ä» 832 è¡Œå‡å°‘
â”‚       â”œâ”€â”€ [id]/
â”‚       â”‚   â”œâ”€â”€ page.tsx (~180 è¡Œ) â¬‡ï¸ ä» 944 è¡Œå‡å°‘
â”‚       â”‚   â””â”€â”€ edit/
â”‚       â”‚       â””â”€â”€ page.tsx (~150 è¡Œ) â¬‡ï¸ ä» 1334 è¡Œå‡å°‘
â”‚       
â”œâ”€â”€ components/
â”‚   â””â”€â”€ requirements/
â”‚       â”œâ”€â”€ RequirementTable.tsx (å·²æœ‰) âœ…
â”‚       â”œâ”€â”€ FilterPanel.tsx (å·²æœ‰) âœ…
â”‚       â”œâ”€â”€ BatchOperations.tsx (å·²æœ‰) âœ…
â”‚       â”‚
â”‚       â”œâ”€â”€ CommentSection.tsx (æ–°å»º) ğŸ†•
â”‚       â”œâ”€â”€ ScheduledReviewCard.tsx (æ–°å»º) ğŸ†•
â”‚       â”œâ”€â”€ EndOwnerOpinionCard.tsx (æ–°å»º) ğŸ†•
â”‚       â”œâ”€â”€ AttachmentsSection.tsx (æ–°å»º) ğŸ†•
â”‚       â”œâ”€â”€ QuickActionsCard.tsx (æ–°å»º) ğŸ†•
â”‚       â”œâ”€â”€ HistorySection.tsx (æ–°å»º) ğŸ†•
â”‚       â”œâ”€â”€ BasicInfoSection.tsx (æ–°å»º) ğŸ†•
â”‚       â””â”€â”€ RequirementFormLayout.tsx (æ–°å»º) ğŸ†•
â”‚       
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ requirements/
â”‚       â”œâ”€â”€ useRequirementFilters.ts (å·²æœ‰) âœ…
â”‚       â”œâ”€â”€ useComments.ts (æ–°å»º) ğŸ†•
â”‚       â”œâ”€â”€ useRequirementForm.ts (æ–°å»º) ğŸ†•
â”‚       â”œâ”€â”€ useScheduledReview.ts (æ–°å»º) ğŸ†•
â”‚       â””â”€â”€ useRequirementDetail.ts (æ–°å»º) ğŸ†•
â”‚       
â””â”€â”€ lib/
    â””â”€â”€ requirements-store.ts (å·²æœ‰) âœ…
```

---

## ğŸ’° é‡æ„æ”¶ç›Šé¢„ä¼°

### ä»£ç é‡ä¼˜åŒ–

| ç±»åˆ« | å½“å‰ | é‡æ„å | å‡å°‘ |
|------|------|--------|------|
| é¡µé¢ç»„ä»¶ | 3,109 è¡Œ | ~600 è¡Œ | **-81%** |
| å…±äº«ç»„ä»¶ | 0 è¡Œ | ~800 è¡Œ | +800 è¡Œ |
| Hooks | 288 è¡Œ | ~600 è¡Œ | +312 è¡Œ |
| **æ€»è®¡** | **3,397 è¡Œ** | **~2,000 è¡Œ** | **-41%** |

### è´¨é‡æå‡

| æŒ‡æ ‡ | å½“å‰ | é‡æ„å |
|------|------|--------|
| ä»£ç é‡å¤ | ~1,000 è¡Œ | ~0 è¡Œ âœ… |
| å¯æµ‹è¯•æ€§ | â­â­ | â­â­â­â­â­ |
| å¯ç»´æŠ¤æ€§ | â­â­ | â­â­â­â­â­ |
| å¤ç”¨æ€§ | â­ | â­â­â­â­â­ |
| æ€§èƒ½ | â­â­â­ | â­â­â­â­ |

---

## ğŸ¯ å®æ–½è®¡åˆ’

### ç¬¬ 1 å‘¨ - ç´§æ€¥ç»„ä»¶

**Day 1-2**: 
- âœ… åˆ›å»º `CommentSection` ç»„ä»¶
- âœ… åˆ›å»º `useComments` hook
- âœ… åœ¨è¯¦æƒ…é¡µå’Œç¼–è¾‘é¡µåº”ç”¨

**Day 3-4**:
- âœ… åˆ›å»º `ScheduledReviewCard` ç»„ä»¶
- âœ… åˆ›å»º `useScheduledReview` hook
- âœ… åœ¨ä¸‰ä¸ªé¡µé¢åº”ç”¨

**Day 5**:
- âœ… åˆ›å»º `EndOwnerOpinionCard` ç»„ä»¶
- âœ… åœ¨ä¸‰ä¸ªé¡µé¢åº”ç”¨

**Day 6-7**:
- âœ… æµ‹è¯•å’Œä¿®å¤
- âœ… ä»£ç å®¡æŸ¥

### ç¬¬ 2 å‘¨ - é«˜ä¼˜å…ˆçº§ç»„ä»¶

**Day 1-2**:
- âœ… åˆ›å»º `useRequirementForm` hook
- âœ… åœ¨æ–°å»ºé¡µå’Œç¼–è¾‘é¡µåº”ç”¨

**Day 3**:
- âœ… åˆ›å»º `AttachmentsSection` ç»„ä»¶

**Day 4**:
- âœ… åˆ›å»º `QuickActionsCard` ç»„ä»¶
- âœ… åˆ›å»º `HistorySection` ç»„ä»¶

**Day 5-7**:
- âœ… æµ‹è¯•å’Œä¿®å¤
- âœ… ä»£ç å®¡æŸ¥
- âœ… æ–‡æ¡£æ›´æ–°

### ç¬¬ 3 å‘¨ - ä¸­ä¼˜å…ˆçº§ä¼˜åŒ–

**Day 1-3**:
- âœ… åˆ›å»ºå¸ƒå±€ç»„ä»¶
- âœ… åˆ›å»º `BasicInfoSection` ç»„ä»¶
- âœ… æœ€ç»ˆæ•´åˆ

**Day 4-7**:
- âœ… å…¨é¢æµ‹è¯•
- âœ… æ€§èƒ½ä¼˜åŒ–
- âœ… æ–‡æ¡£å®Œå–„

---

## ğŸ“ æœ€ä½³å®è·µå»ºè®®

### 1. ç»„ä»¶è®¾è®¡åŸåˆ™

âœ… **å•ä¸€èŒè´£åŸåˆ™ (SRP)**
```typescript
// âŒ ä¸å¥½
function RequirementPage() {
  // åŒ…å«æ‰€æœ‰é€»è¾‘ (1000+ è¡Œ)
}

// âœ… å¥½
function RequirementPage() {
  return (
    <Layout>
      <Header />
      <Content />
      <Sidebar />
    </Layout>
  );
}
```

âœ… **ç»„ä»¶å¤§å°æ§åˆ¶**
- å•ä¸ªç»„ä»¶ä¸è¶…è¿‡ 300 è¡Œ
- è¶…è¿‡ 150 è¡Œè€ƒè™‘æ‹†åˆ†

âœ… **Props ä¼ é€’æ¸…æ™°**
```typescript
// âœ… å¥½
interface CommentSectionProps {
  requirementId: string;
  editable?: boolean;
  onCommentAdded?: (comment: Comment) => void;
}
```

---

### 2. Hook è®¾è®¡åŸåˆ™

âœ… **é€»è¾‘å°è£…**
```typescript
// âœ… å°†å¤æ‚é€»è¾‘å°è£…åœ¨ hook ä¸­
function useComments(requirementId: string) {
  const [comments, setComments] = useState([]);
  const addComment = useCallback(...);
  const addReply = useCallback(...);
  return { comments, addComment, addReply };
}
```

âœ… **ä¾èµ–æ³¨å…¥**
```typescript
// âœ… ä¾èµ–é€šè¿‡å‚æ•°ä¼ å…¥ï¼Œä¾¿äºæµ‹è¯•
function useRequirementForm(
  requirementId?: string,
  onSuccess?: (req: Requirement) => void
) {
  // ...
}
```

---

### 3. ä»£ç ç»„ç»‡åŸåˆ™

âœ… **æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡**
```
requirements/
â”œâ”€â”€ components/      # UI ç»„ä»¶
â”œâ”€â”€ hooks/           # ä¸šåŠ¡é€»è¾‘ hooks
â”œâ”€â”€ types/           # ç±»å‹å®šä¹‰
â””â”€â”€ utils/           # å·¥å…·å‡½æ•°
```

âœ… **æ˜ç¡®çš„å¯¼å…¥å¯¼å‡º**
```typescript
// components/requirements/index.ts
export { CommentSection } from './CommentSection';
export { ScheduledReviewCard } from './ScheduledReviewCard';
export { EndOwnerOpinionCard } from './EndOwnerOpinionCard';
```

---

## âœ… æ£€æŸ¥æ¸…å•

### ç»„ä»¶è®¾è®¡
- [ ] å•ä¸ªç»„ä»¶ä¸è¶…è¿‡ 300 è¡Œ
- [ ] ç»„ä»¶èŒè´£å•ä¸€æ˜ç¡®
- [ ] Props æ¥å£æ¸…æ™°
- [ ] é¿å…è¿‡æ·±åµŒå¥— (< 5 å±‚)

### ä»£ç å¤ç”¨
- [ ] é‡å¤ä»£ç å·²æŠ½å–
- [ ] å…±äº«ç»„ä»¶å·²åˆ›å»º
- [ ] ä¸šåŠ¡é€»è¾‘åœ¨ hooks ä¸­

### å¯æµ‹è¯•æ€§
- [ ] ç»„ä»¶å¯ç‹¬ç«‹æµ‹è¯•
- [ ] Hooks å¯ç‹¬ç«‹æµ‹è¯•
- [ ] æ— å‰¯ä½œç”¨ä¾èµ–

### å¯ç»´æŠ¤æ€§
- [ ] ä»£ç ç»“æ„æ¸…æ™°
- [ ] å‘½åè¯­ä¹‰åŒ–
- [ ] æ³¨é‡Šå……åˆ†
- [ ] æ–‡æ¡£å®Œå–„

---

## ğŸ“Š æ€»ç»“

### å½“å‰çŠ¶æ€
- ğŸ”´ **éœ€æ±‚ç¼–è¾‘é¡µ**: 1,334 è¡Œï¼Œæ€¥éœ€é‡æ„
- ğŸ”´ **éœ€æ±‚è¯¦æƒ…é¡µ**: 944 è¡Œï¼Œæ€¥éœ€é‡æ„
- ğŸŸ¡ **éœ€æ±‚æ–°å»ºé¡µ**: 832 è¡Œï¼Œå»ºè®®é‡æ„
- ğŸŸ¢ **éœ€æ±‚æ± é¡µ**: 169 è¡Œï¼Œç»“æ„è‰¯å¥½ âœ…

### æ ¸å¿ƒé—®é¢˜
1. **ä»£ç é‡å¤**: ~1,000 è¡Œé‡å¤ä»£ç 
2. **ç»„ä»¶è¿‡å¤§**: ä¸‰ä¸ªé¡µé¢éƒ½è¶…è¿‡ 800 è¡Œ
3. **èŒè´£ä¸æ¸…**: æ‰€æœ‰é€»è¾‘æ··åœ¨ä¸€èµ·
4. **éš¾ä»¥ç»´æŠ¤**: ä¿®æ”¹ä¸€å¤„éœ€è¦æ”¹ä¸‰å¤„

### é‡æ„ç›®æ ‡
- å‡å°‘ **41%** ä»£ç é‡
- æ¶ˆé™¤ **100%** é‡å¤ä»£ç 
- æå‡ **300%** å¯ç»´æŠ¤æ€§
- æå‡ **500%** å¯æµ‹è¯•æ€§

### å®æ–½æ—¶é—´
- **3 å‘¨**å®Œæˆå…¨éƒ¨é‡æ„
- **1 å‘¨**å®Œæˆæ ¸å¿ƒç»„ä»¶
- å³å¯æŠ•å…¥ä½¿ç”¨

---

**æŠ¥å‘Šç”Ÿæˆ**: 2024-09-30  
**å®¡æŸ¥äºº**: AI Code Reviewer  
**å‚è€ƒæ–‡æ¡£**: `CODE_REVIEW_REPORT.md`
